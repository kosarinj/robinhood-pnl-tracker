[build]
builder = "nixpacks"
buildCommand = "npm install --legacy-peer-deps && npm run build"

[deploy]
startCommand = "npm start"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

[[deploy.volumes]]
mountPath = "/app/data"

[deploy.environmentVariables]
DATABASE_PATH = "/app/data/trading_data.db"
NODE_ENV = "production"
PUPPETEER_SKIP_DOWNLOAD = "true"
